# C++的变量自动转换

强制转换规则很简单，`(待转换类型)(表达式)`。但自动转换需要遵循一定规则：  



1. 若参与运算量的类型不同，则先转换成同一类型，然后进行运算。

    

2. 转换按数据长度增加的方向进行，以保证精度不降低。如int型和long型运算时，先把int量转成long型后再进行运算。
    * 若两种类型的字节数不同，转换成字节数高的类型

    * 若两种类型的字节数相同，且一种有符号，一种无符号，则转换成无符号类型

      ```c++
      int a = 1;
      double b = 2.1;
      cout << "a + b = " << a + b << endl;  //输出为a + b = 3.1，先将a转为double再加上2.1
      ```

      

3. 所有的浮点运算都是以双精度进行的，即使仅含float单精度量运算的表达式，也要先转换成double型，再作运算。

    

4. char型和short型参与运算时，必须先转换成int型。

    

5. 在赋值运算中，赋值号两边量的数据类型不同时，赋值号右边量的类型将转换为左边量的类型。如果右边量的数据类型长度比左边长时，将丢失一部分数据，这样会降低精度

    ```c++
    int a=1;
    double b=2.5;
    a=b;
    cout << a; //输出为 2，丢失小数部分
    ```
